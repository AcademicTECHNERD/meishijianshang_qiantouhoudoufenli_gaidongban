{"ast":null,"code":"import \"core-js/modules/es.array.index-of.js\";\nimport \"core-js/modules/es.array.join.js\";\nimport storage from './storage';\nimport menu from './menu';\n/**\r\n * 是否有权限\r\n * @param {*} key\r\n */\nexport function isAuth(tableName, key) {\n  var role = storage.get(\"role\");\n  if (!role) {\n    role = '管理员';\n  }\n  var menus = menu.list();\n  for (var i = 0; i < menus.length; i++) {\n    if (menus[i].roleName == role) {\n      for (var j = 0; j < menus[i].backMenu.length; j++) {\n        for (var k = 0; k < menus[i].backMenu[j].child.length; k++) {\n          if (tableName == menus[i].backMenu[j].child[k].tableName) {\n            var buttons = menus[i].backMenu[j].child[k].buttons.join(',');\n            return buttons.indexOf(key) !== -1 || false;\n          }\n        }\n      }\n    }\n  }\n  // for(let i=0;i<menus.length;i++){\n  //     if(menus[i].roleName==role){\n  //         for(let j=0;j<menus[i].backMenu.length;j++){\n  //             if(menus[i].backMenu[j].tableName==tableName){\n  //                 let buttons = menus[i].backMenu[j].child[0].buttons.join(',');\n  //                 return buttons.indexOf(key) !== -1 || false\n  //             }\n  //         }\n  //     }\n  // }\n  return false;\n}","map":{"version":3,"names":["storage","menu","isAuth","tableName","key","role","get","menus","list","i","length","roleName","j","backMenu","k","child","buttons","join","indexOf"],"sources":["E:/项目学习合集/FoodSharingPlatform/front/src/utils/utils.js"],"sourcesContent":["import storage from './storage';\r\nimport menu from './menu';\r\n/**\r\n * 是否有权限\r\n * @param {*} key\r\n */\r\nexport function isAuth(tableName,key) {\r\n    let role = storage.get(\"role\");\r\n    if(!role){\r\n        role = '管理员';\r\n    }\r\n    let menus = menu.list();\r\n    for(let i=0;i<menus.length;i++){\r\n        if(menus[i].roleName==role){\r\n            for(let j=0;j<menus[i].backMenu.length;j++){\r\n                for(let k=0;k<menus[i].backMenu[j].child.length;k++){\r\n                    if(tableName==menus[i].backMenu[j].child[k].tableName){\r\n                        let buttons = menus[i].backMenu[j].child[k].buttons.join(',');\r\n                        return buttons.indexOf(key) !== -1 || false\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    // for(let i=0;i<menus.length;i++){\r\n    //     if(menus[i].roleName==role){\r\n    //         for(let j=0;j<menus[i].backMenu.length;j++){\r\n    //             if(menus[i].backMenu[j].tableName==tableName){\r\n    //                 let buttons = menus[i].backMenu[j].child[0].buttons.join(',');\r\n    //                 return buttons.indexOf(key) !== -1 || false\r\n    //             }\r\n    //         }\r\n    //     }\r\n    // }\r\n    return false;\r\n}\r\n\r\n"],"mappings":";;AAAA,OAAOA,OAAO,MAAM,WAAW;AAC/B,OAAOC,IAAI,MAAM,QAAQ;AACzB;AACA;AACA;AACA;AACA,OAAO,SAASC,MAAMA,CAACC,SAAS,EAACC,GAAG,EAAE;EAClC,IAAIC,IAAI,GAAGL,OAAO,CAACM,GAAG,CAAC,MAAM,CAAC;EAC9B,IAAG,CAACD,IAAI,EAAC;IACLA,IAAI,GAAG,KAAK;EAChB;EACA,IAAIE,KAAK,GAAGN,IAAI,CAACO,IAAI,CAAC,CAAC;EACvB,KAAI,IAAIC,CAAC,GAAC,CAAC,EAACA,CAAC,GAACF,KAAK,CAACG,MAAM,EAACD,CAAC,EAAE,EAAC;IAC3B,IAAGF,KAAK,CAACE,CAAC,CAAC,CAACE,QAAQ,IAAEN,IAAI,EAAC;MACvB,KAAI,IAAIO,CAAC,GAAC,CAAC,EAACA,CAAC,GAACL,KAAK,CAACE,CAAC,CAAC,CAACI,QAAQ,CAACH,MAAM,EAACE,CAAC,EAAE,EAAC;QACvC,KAAI,IAAIE,CAAC,GAAC,CAAC,EAACA,CAAC,GAACP,KAAK,CAACE,CAAC,CAAC,CAACI,QAAQ,CAACD,CAAC,CAAC,CAACG,KAAK,CAACL,MAAM,EAACI,CAAC,EAAE,EAAC;UAChD,IAAGX,SAAS,IAAEI,KAAK,CAACE,CAAC,CAAC,CAACI,QAAQ,CAACD,CAAC,CAAC,CAACG,KAAK,CAACD,CAAC,CAAC,CAACX,SAAS,EAAC;YAClD,IAAIa,OAAO,GAAGT,KAAK,CAACE,CAAC,CAAC,CAACI,QAAQ,CAACD,CAAC,CAAC,CAACG,KAAK,CAACD,CAAC,CAAC,CAACE,OAAO,CAACC,IAAI,CAAC,GAAG,CAAC;YAC7D,OAAOD,OAAO,CAACE,OAAO,CAACd,GAAG,CAAC,KAAK,CAAC,CAAC,IAAI,KAAK;UAC/C;QACJ;MACJ;IACJ;EACJ;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA,OAAO,KAAK;AAChB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}