{"ast":null,"code":"// 数字，邮件，手机，url，身份证校验\nimport { isNumber, isIntNumer, isEmail, isMobile, isPhone, isURL, checkIdCard } from \"@/utils/validate\";\nexport default {\n  data: function data() {\n    return {\n      ruleForm: {},\n      flag: '',\n      usersFlag: false,\n      defaultusersexOptions: []\n    };\n  },\n  mounted: function mounted() {\n    var _this = this;\n    var table = this.$storage.get(\"sessionTable\");\n    this.flag = table;\n    this.$http({\n      url: \"\".concat(this.$storage.get(\"sessionTable\"), \"/session\"),\n      method: \"get\"\n    }).then(function (_ref) {\n      var data = _ref.data;\n      if (data && data.code === 0) {\n        _this.ruleForm = data.data;\n      } else {\n        _this.$message.error(data.msg);\n      }\n    });\n    this.defaultusersexOptions = \"男,女\".split(',');\n  },\n  methods: {\n    yonghuzhaopianUploadChange: function yonghuzhaopianUploadChange(fileUrls) {\n      this.ruleForm.zhaopian = fileUrls;\n    },\n    defaultuserpictureUploadChange: function defaultuserpictureUploadChange(fileUrls) {\n      this.ruleForm.picture = fileUrls;\n    },\n    onUpdateHandler: function onUpdateHandler() {\n      var _this2 = this;\n      if (!this.ruleForm.yonghuming && 'yonghu' == this.flag) {\n        this.$message.error('用户名不能为空');\n        return;\n      }\n      if (!this.ruleForm.mima && 'yonghu' == this.flag) {\n        this.$message.error('密码不能为空');\n        return;\n      }\n      if (!this.ruleForm.xingming && 'yonghu' == this.flag) {\n        this.$message.error('姓名不能为空');\n        return;\n      }\n      if (!this.ruleForm.shenfenzheng && 'yonghu' == this.flag) {\n        this.$message.error('身份证不能为空');\n        return;\n      }\n      if (!this.ruleForm.username && 'defaultuser' == this.flag) {\n        this.$message.error('用户名不能为空');\n        return;\n      }\n      if (!this.ruleForm.mima && 'defaultuser' == this.flag) {\n        this.$message.error('密码不能为空');\n        return;\n      }\n      if ('defaultuser' == this.flag && this.ruleForm.age && !isIntNumer(this.ruleForm.age)) {\n        this.$message.error(\"\\u5E74\\u9F84\\u5E94\\u8F93\\u5165\\u6574\\u6570\");\n        return;\n      }\n      if ('defaultuser' == this.flag && this.ruleForm.phone && !isPhone(this.ruleForm.phone)) {\n        this.$message.error(\"\\u7535\\u8BDD\\u5E94\\u8F93\\u5165\\u7535\\u8BDD\\u683C\\u5F0F\");\n        return;\n      }\n      if ('defaultuser' == this.flag && this.ruleForm.email && !isEmail(this.ruleForm.email)) {\n        this.$message.error(\"\\u90AE\\u7BB1\\u5E94\\u8F93\\u5165\\u90AE\\u7BB1\\u683C\\u5F0F\");\n        return;\n      }\n      this.$http({\n        url: \"\".concat(this.$storage.get(\"sessionTable\"), \"/update\"),\n        method: \"post\",\n        data: this.ruleForm\n      }).then(function (_ref2) {\n        var data = _ref2.data;\n        if (data && data.code === 0) {\n          _this2.$message({\n            message: \"修改信息成功\",\n            type: \"success\",\n            duration: 1500,\n            onClose: function onClose() {}\n          });\n        } else {\n          _this2.$message.error(data.msg);\n        }\n      });\n    }\n  }\n};","map":{"version":3,"names":["isNumber","isIntNumer","isEmail","isMobile","isPhone","isURL","checkIdCard","data","ruleForm","flag","usersFlag","defaultusersexOptions","mounted","_this","table","$storage","get","$http","url","concat","method","then","_ref","code","$message","error","msg","split","methods","yonghuzhaopianUploadChange","fileUrls","zhaopian","defaultuserpictureUploadChange","picture","onUpdateHandler","_this2","yonghuming","mima","xingming","shenfenzheng","username","age","phone","email","_ref2","message","type","duration","onClose"],"sources":["src/views/center.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <el-form class=\"detail-form-content\" ref=\"ruleForm\" :model=\"ruleForm\" label-width=\"80px\">\r\n      <el-row>\r\n        <el-col :span=\"12\">\r\n          <el-form-item v-if=\"flag == 'yonghu'\" label=\"用户名\" prop=\"yonghuming\">\r\n            <el-input v-model=\"ruleForm.yonghuming\" readonly placeholder=\"用户名\" clearable></el-input>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"12\">\r\n          <el-form-item v-if=\"flag == 'yonghu'\" label=\"姓名\" prop=\"xingming\">\r\n            <el-input v-model=\"ruleForm.xingming\" placeholder=\"姓名\" clearable></el-input>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"12\">\r\n          <el-form-item v-if=\"flag == 'yonghu'\" label=\"手机\" prop=\"shouji\">\r\n            <el-input v-model=\"ruleForm.shouji\" placeholder=\"手机\" clearable></el-input>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"12\">\r\n          <el-form-item v-if=\"flag == 'yonghu'\" label=\"邮箱\" prop=\"youxiang\">\r\n            <el-input v-model=\"ruleForm.youxiang\" placeholder=\"邮箱\" clearable></el-input>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"12\">\r\n          <el-form-item v-if=\"flag == 'yonghu'\" label=\"身份证\" prop=\"shenfenzheng\">\r\n            <el-input v-model=\"ruleForm.shenfenzheng\" placeholder=\"身份证\" clearable></el-input>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"24\">\r\n          <el-form-item v-if=\"flag == 'yonghu'\" label=\"照片\" prop=\"zhaopian\">\r\n            <file-upload tip=\"点击上传照片\" action=\"file/upload\" :limit=\"3\" :multiple=\"true\"\r\n              :fileUrls=\"ruleForm.zhaopian ? ruleForm.zhaopian : ''\" @change=\"yonghuzhaopianUploadChange\"></file-upload>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"12\">\r\n          <el-form-item v-if=\"flag == 'defaultuser'\" label=\"用户名\" prop=\"username\">\r\n            <el-input v-model=\"ruleForm.username\" placeholder=\"用户名\" clearable></el-input>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"12\">\r\n          <el-form-item v-if=\"flag == 'defaultuser'\" label=\"姓名\" prop=\"name\">\r\n            <el-input v-model=\"ruleForm.name\" placeholder=\"姓名\" clearable></el-input>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"12\">\r\n          <el-form-item v-if=\"flag == 'defaultuser'\" label=\"性别\" prop=\"sex\">\r\n            <el-select v-model=\"ruleForm.sex\" placeholder=\"请选择性别\">\r\n              <el-option v-for=\"(item, index) in defaultusersexOptions\" v-bind:key=\"index\" :label=\"item\" :value=\"item\">\r\n              </el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"12\">\r\n          <el-form-item v-if=\"flag == 'defaultuser'\" label=\"年龄\" prop=\"age\">\r\n            <el-input v-model=\"ruleForm.age\" placeholder=\"年龄\" clearable></el-input>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"12\">\r\n          <el-form-item v-if=\"flag == 'defaultuser'\" label=\"电话\" prop=\"phone\">\r\n            <el-input v-model=\"ruleForm.phone\" placeholder=\"电话\" clearable></el-input>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"24\">\r\n          <el-form-item v-if=\"flag == 'defaultuser'\" label=\"照片\" prop=\"picture\">\r\n            <file-upload tip=\"点击上传照片\" action=\"file/upload\" :limit=\"3\" :multiple=\"true\"\r\n              :fileUrls=\"ruleForm.picture ? ruleForm.picture : ''\" @change=\"defaultuserpictureUploadChange\"></file-upload>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"12\">\r\n          <el-form-item v-if=\"flag == 'defaultuser'\" label=\"邮箱\" prop=\"email\">\r\n            <el-input v-model=\"ruleForm.email\" placeholder=\"邮箱\" clearable></el-input>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-form-item v-if=\"flag == 'users'\" label=\"用户名\" prop=\"username\">\r\n          <el-input v-model=\"ruleForm.username\" placeholder=\"用户名\"></el-input>\r\n        </el-form-item>\r\n        <el-col :span=\"24\">\r\n          <el-form-item>\r\n            <el-button type=\"primary\" @click=\"onUpdateHandler\">修 改</el-button>\r\n          </el-form-item>\r\n        </el-col>\r\n      </el-row>\r\n    </el-form>\r\n  </div>\r\n</template>\r\n<script>\r\n// 数字，邮件，手机，url，身份证校验\r\nimport { isNumber, isIntNumer, isEmail, isMobile, isPhone, isURL, checkIdCard } from \"@/utils/validate\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      ruleForm: {},\r\n      flag: '',\r\n      usersFlag: false,\r\n      defaultusersexOptions: [],\r\n    };\r\n  },\r\n  mounted() {\r\n    var table = this.$storage.get(\"sessionTable\");\r\n    this.flag = table;\r\n    this.$http({\r\n      url: `${this.$storage.get(\"sessionTable\")}/session`,\r\n      method: \"get\"\r\n    }).then(({ data }) => {\r\n      if (data && data.code === 0) {\r\n        this.ruleForm = data.data;\r\n      } else {\r\n        this.$message.error(data.msg);\r\n      }\r\n    });\r\n    this.defaultusersexOptions = \"男,女\".split(',')\r\n  },\r\n  methods: {\r\n    yonghuzhaopianUploadChange(fileUrls) {\r\n      this.ruleForm.zhaopian = fileUrls;\r\n    },\r\n    defaultuserpictureUploadChange(fileUrls) {\r\n      this.ruleForm.picture = fileUrls;\r\n    },\r\n    onUpdateHandler() {\r\n      if ((!this.ruleForm.yonghuming) && 'yonghu' == this.flag) {\r\n        this.$message.error('用户名不能为空');\r\n        return\r\n      }\r\n      if ((!this.ruleForm.mima) && 'yonghu' == this.flag) {\r\n        this.$message.error('密码不能为空');\r\n        return\r\n      }\r\n      if ((!this.ruleForm.xingming) && 'yonghu' == this.flag) {\r\n        this.$message.error('姓名不能为空');\r\n        return\r\n      }\r\n      if ((!this.ruleForm.shenfenzheng) && 'yonghu' == this.flag) {\r\n        this.$message.error('身份证不能为空');\r\n        return\r\n      }\r\n      if ((!this.ruleForm.username) && 'defaultuser' == this.flag) {\r\n        this.$message.error('用户名不能为空');\r\n        return\r\n      }\r\n      if ((!this.ruleForm.mima) && 'defaultuser' == this.flag) {\r\n        this.$message.error('密码不能为空');\r\n        return\r\n      }\r\n      if ('defaultuser' == this.flag && this.ruleForm.age && (!isIntNumer(this.ruleForm.age))) {\r\n        this.$message.error(`年龄应输入整数`);\r\n        return\r\n      }\r\n      if ('defaultuser' == this.flag && this.ruleForm.phone && (!isPhone(this.ruleForm.phone))) {\r\n        this.$message.error(`电话应输入电话格式`);\r\n        return\r\n      }\r\n      if ('defaultuser' == this.flag && this.ruleForm.email && (!isEmail(this.ruleForm.email))) {\r\n        this.$message.error(`邮箱应输入邮箱格式`);\r\n        return\r\n      }\r\n      this.$http({\r\n        url: `${this.$storage.get(\"sessionTable\")}/update`,\r\n        method: \"post\",\r\n        data: this.ruleForm\r\n      }).then(({ data }) => {\r\n        if (data && data.code === 0) {\r\n          this.$message({\r\n            message: \"修改信息成功\",\r\n            type: \"success\",\r\n            duration: 1500,\r\n            onClose: () => {\r\n            }\r\n          });\r\n        } else {\r\n          this.$message.error(data.msg);\r\n        }\r\n      });\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped></style>\r\n"],"mappings":"AAuFA;AACA,SAAAA,QAAA,EAAAC,UAAA,EAAAC,OAAA,EAAAC,QAAA,EAAAC,OAAA,EAAAC,KAAA,EAAAC,WAAA;AAEA;EACAC,IAAA,WAAAA,KAAA;IACA;MACAC,QAAA;MACAC,IAAA;MACAC,SAAA;MACAC,qBAAA;IACA;EACA;EACAC,OAAA,WAAAA,QAAA;IAAA,IAAAC,KAAA;IACA,IAAAC,KAAA,QAAAC,QAAA,CAAAC,GAAA;IACA,KAAAP,IAAA,GAAAK,KAAA;IACA,KAAAG,KAAA;MACAC,GAAA,KAAAC,MAAA,MAAAJ,QAAA,CAAAC,GAAA;MACAI,MAAA;IACA,GAAAC,IAAA,WAAAC,IAAA;MAAA,IAAAf,IAAA,GAAAe,IAAA,CAAAf,IAAA;MACA,IAAAA,IAAA,IAAAA,IAAA,CAAAgB,IAAA;QACAV,KAAA,CAAAL,QAAA,GAAAD,IAAA,CAAAA,IAAA;MACA;QACAM,KAAA,CAAAW,QAAA,CAAAC,KAAA,CAAAlB,IAAA,CAAAmB,GAAA;MACA;IACA;IACA,KAAAf,qBAAA,SAAAgB,KAAA;EACA;EACAC,OAAA;IACAC,0BAAA,WAAAA,2BAAAC,QAAA;MACA,KAAAtB,QAAA,CAAAuB,QAAA,GAAAD,QAAA;IACA;IACAE,8BAAA,WAAAA,+BAAAF,QAAA;MACA,KAAAtB,QAAA,CAAAyB,OAAA,GAAAH,QAAA;IACA;IACAI,eAAA,WAAAA,gBAAA;MAAA,IAAAC,MAAA;MACA,UAAA3B,QAAA,CAAA4B,UAAA,qBAAA3B,IAAA;QACA,KAAAe,QAAA,CAAAC,KAAA;QACA;MACA;MACA,UAAAjB,QAAA,CAAA6B,IAAA,qBAAA5B,IAAA;QACA,KAAAe,QAAA,CAAAC,KAAA;QACA;MACA;MACA,UAAAjB,QAAA,CAAA8B,QAAA,qBAAA7B,IAAA;QACA,KAAAe,QAAA,CAAAC,KAAA;QACA;MACA;MACA,UAAAjB,QAAA,CAAA+B,YAAA,qBAAA9B,IAAA;QACA,KAAAe,QAAA,CAAAC,KAAA;QACA;MACA;MACA,UAAAjB,QAAA,CAAAgC,QAAA,0BAAA/B,IAAA;QACA,KAAAe,QAAA,CAAAC,KAAA;QACA;MACA;MACA,UAAAjB,QAAA,CAAA6B,IAAA,0BAAA5B,IAAA;QACA,KAAAe,QAAA,CAAAC,KAAA;QACA;MACA;MACA,0BAAAhB,IAAA,SAAAD,QAAA,CAAAiC,GAAA,KAAAxC,UAAA,MAAAO,QAAA,CAAAiC,GAAA;QACA,KAAAjB,QAAA,CAAAC,KAAA;QACA;MACA;MACA,0BAAAhB,IAAA,SAAAD,QAAA,CAAAkC,KAAA,KAAAtC,OAAA,MAAAI,QAAA,CAAAkC,KAAA;QACA,KAAAlB,QAAA,CAAAC,KAAA;QACA;MACA;MACA,0BAAAhB,IAAA,SAAAD,QAAA,CAAAmC,KAAA,KAAAzC,OAAA,MAAAM,QAAA,CAAAmC,KAAA;QACA,KAAAnB,QAAA,CAAAC,KAAA;QACA;MACA;MACA,KAAAR,KAAA;QACAC,GAAA,KAAAC,MAAA,MAAAJ,QAAA,CAAAC,GAAA;QACAI,MAAA;QACAb,IAAA,OAAAC;MACA,GAAAa,IAAA,WAAAuB,KAAA;QAAA,IAAArC,IAAA,GAAAqC,KAAA,CAAArC,IAAA;QACA,IAAAA,IAAA,IAAAA,IAAA,CAAAgB,IAAA;UACAY,MAAA,CAAAX,QAAA;YACAqB,OAAA;YACAC,IAAA;YACAC,QAAA;YACAC,OAAA,WAAAA,QAAA,GACA;UACA;QACA;UACAb,MAAA,CAAAX,QAAA,CAAAC,KAAA,CAAAlB,IAAA,CAAAmB,GAAA;QACA;MACA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}